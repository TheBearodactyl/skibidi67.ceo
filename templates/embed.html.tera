<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ video.title }} — {{ site_host }}</title>

  <meta property="og:site_name" content="{{ site_host }}">
  <meta property="og:title" content="{{ video.title }}">
  <meta property="og:description" content="uploaded by {{ video.uploaded_by_name }} on {{ site_host }}">
  <meta property="og:url" content="{{ base_url }}/ui/videos/{{ video.id }}">

{% if video.media_type == "audio" %}
  <meta property="og:type" content="music.song">
  <meta property="og:audio" content="{{ file_url }}">
  <meta property="og:audio:secure_url" content="{{ file_url }}">
  <meta property="og:audio:type" content="{{ video.content_type }}">
  <meta name="twitter:card" content="summary">
{% elif video.media_type == "image" %}
  <meta property="og:type" content="article">
  <meta property="og:image" content="{{ file_url }}">
  <meta property="og:image:secure_url" content="{{ file_url }}">
  <meta property="og:image:type" content="{{ video.content_type }}">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="{{ file_url }}">
{% else %}
  <meta property="og:type" content="video.other">
  <meta property="og:video" content="{{ file_url }}">
  <meta property="og:video:secure_url" content="{{ file_url }}">
  <meta property="og:video:type" content="{{ video.content_type }}">
  <meta property="og:video:width" content="1920">
  <meta property="og:video:height" content="1080">
  <meta name="twitter:card" content="player">
  <meta name="twitter:player" content="{{ file_url }}">
  <meta name="twitter:player:width" content="1280">
  <meta name="twitter:player:height" content="720">
{% endif %}

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: #1e1e2e; font-family: 'Open Sans', sans-serif; display: flex; align-items: center; justify-content: center; min-height: 100vh; }
    video { max-width: 100vw; max-height: 100vh; }
    audio { width: 80%; max-width: 600px; }
    img { max-width: 100vw; max-height: 100vh; object-fit: contain; }
  </style>
</head>
<body>
{% if video.media_type == "audio" %}
  {% if video.nsfw %}
  <div id="nsfw-gate"><a href="#" onclick="reveal(); return false;">Click to listen (18+ only — NSFW)</a></div>
  <div id="nsfw-media" hidden>
  <audio controls autoplay>
    <source src="{{ file_url }}" type="{{ video.content_type }}">
  </audio>
  </div>
  {% else %}
  <audio controls autoplay>
    <source src="{{ file_url }}" type="{{ video.content_type }}">
  </audio>
  {% endif %}
{% elif video.media_type == "image" %}
  {% if video.nsfw %}
  <div id="nsfw-gate"><a href="#" onclick="reveal(); return false;">Click to view (18+ only — NSFW)</a></div>
  <div id="nsfw-media" hidden>
  <img src="{{ file_url }}" alt="{{ video.title }}">
  </div>
  {% else %}
  <img src="{{ file_url }}" alt="{{ video.title }}">
  {% endif %}
{% else %}
  {% if video.nsfw %}
  <div id="nsfw-gate"><a href="#" onclick="reveal(); return false;">Click to watch (18+ only — NSFW)</a></div>
  <div id="nsfw-media" hidden>
  <video controls autoplay>
    <source src="{{ file_url }}" type="{{ video.content_type }}">
  </video>
  </div>
  {% else %}
  <video controls autoplay>
    <source src="{{ file_url }}" type="{{ video.content_type }}">
  </video>
  {% endif %}
{% endif %}
<script>
function reveal() {
  if (!confirm('This content is marked NSFW. Are you 18 or older?')) return;
  document.getElementById('nsfw-gate').hidden = true;
  document.getElementById('nsfw-media').hidden = false;
}
</script>
</body>
</html>
